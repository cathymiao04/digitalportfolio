<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} | Cathy Miao</title>
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css">
</head>

<body>

  {% include navbar.html %}

  <main class="content">
    {{ content }}
  </main>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const track = document.querySelector('[data-slider-track]');
  const slides = Array.from(track.children);
  const prev = document.querySelector('.slider-btn.left');
  const next = document.querySelector('.slider-btn.right');

  if (!track || !slides.length || !prev || !next) return;

  const firstClone = slides[0].cloneNode(true);
  const lastClone = slides[slides.length - 1].cloneNode(true);

  track.appendChild(firstClone);
  track.insertBefore(lastClone, slides[0]);

  const allSlides = Array.from(track.children);
  let index = 1;
  const slideWidth = 100;

  track.style.transform = `translateX(-${index * slideWidth}%)`;

  function move() {
    track.style.transition = 'transform 0.4s ease';
    track.style.transform = `translateX(-${index * slideWidth}%)`;
  }

  next.addEventListener('click', () => {
    index++;
    move();
  });

  prev.addEventListener('click', () => {
    index--;
    move();
  });

  track.addEventListener('transitionend', () => {
    if (allSlides[index].isSameNode(firstClone)) {
      track.style.transition = 'none';
      index = 1;
      track.style.transform = `translateX(-${index * slideWidth}%)`;
    }

    if (allSlides[index].isSameNode(lastClone)) {
      track.style.transition = 'none';
      index = allSlides.length - 2;
      track.style.transform = `translateX(-${index * slideWidth}%)`;
    }
  });
});
</script>

</body>
</html>
