<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} | Cathy Miao</title>
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css">
</head>

<body>

  {% include navbar.html %}

  <main class="content">
    {{ content }}
  </main>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const track = document.querySelector('[data-slider-track]');
  const prev = document.querySelector('.slider-btn.left');
  const next = document.querySelector('.slider-btn.right');

  if (!track || !prev || !next) return;

  const slides = Array.from(track.children);
  const first = slides[0];
  const last = slides[slides.length - 1];

  const firstClone = first.cloneNode(true);
  const lastClone = last.cloneNode(true);

  track.appendChild(firstClone);
  track.insertBefore(lastClone, first);

  const all = Array.from(track.children);
  let index = 1;

  // Initial position
  track.style.transform = `translateX(-${index * 100}%)`;

  function jumpTo(i) {
    track.style.transition = 'none';
    track.style.transform = `translateX(-${i * 100}%)';
    track.offsetHeight;
    track.style.transition = 'transform 0.4s ease';
    index = i;
  }

  function moveTo(i) {
    index = i;
    track.style.transform = `translateX(-${index * 100}%)`;
  }

  next.addEventListener('click', () => {
    if (index === all.length - 2) {
      jumpTo(1);
    }
    moveTo(index + 1);
  });

  prev.addEventListener('click', () => {
    if (index === 1) {
      jumpTo(all.length - 2);
    }
    moveTo(index - 1);
  });
});
</script>

</body>
</html>
